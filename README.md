# 磁盘挂载管理工具 v2.0

## 基本信息
- 作者：入戏太深
- 支持系统：Ubuntu 18.04+, Debian 9+
- 更新日期：2024年12月27日

## 主要功能

### 1. 系统兼容性检查
- 检查操作系统类型和版本
- 验证 root 权限
- 检查必要的系统命令
- 自动安装缺失的依赖包

### 2. 文件系统支持
- ext4：Linux 默认文件系统
- ntfs/ntfs-3g：Windows 兼容文件系统
- fat32/vfat：通用兼容文件系统
- xfs：大文件存储文件系统
- exfat：跨平台兼容文件系统

### 3. 磁盘管理
- 显示所有可用磁盘列表
- 识别系统磁盘并特殊标记
- 显示磁盘详细信息（型号、大小、分区等）
- 检查磁盘健康状态（SMART）
- 显示磁盘使用情况和挂载点

### 4. 分区管理
- 创建 GPT 分区表
- 支持自动分区（单分区）
- 支持手动分区（最多4个分区）
- 自定义分区大小（支持 GB、%等单位）
- 分区表自动更新和验证

### 5. 格式化功能
- 支持多种文件系统格式化
- 格式化前安全检查
- 格式化后文件系统验证
- 处理正在使用的设备

### 6. 挂载管理
- 自动检测文件系统类型
- 智能挂载点管理
- 处理 Windows 休眠的 NTFS 分区
- 支持强制卸载和重新挂载
- 自动创建挂载点目录

### 7. FSTAB 配置
- 自动生成 fstab 条目
- 使用 UUID 确保稳定性
- 根据文件系统类型设置合适的挂载选项
- 添加前备份 fstab
- 添加后自动测试验证

### 8. 安全特性
- 系统磁盘警告保护
- 正在使用的磁盘处理
- 操作前确认机制
- 错误回滚机制
- 日志记录功能

### 9. 用户界面
- 交互式菜单系统
- 彩色输出提示
- 详细的操作反馈
- 进度和状态显示
- 错误提示和处理

### 10. 主要命令选项
0. 退出程序
1. 格式化磁盘
2. 挂载磁盘
3. 卸载磁盘
4. 查看磁盘详情
5. 刷新磁盘列表

### 11. 特殊处理
- 处理设备忙碌状态
- 处理进程占用
- 处理文件系统错误
- 处理权限问题
- 处理特殊字符和编码

### 12. 日志和调试
- 操作日志记录
- 错误日志记录
- 系统命令执行记录
- 状态变更记录
- 配置修改记录

## 使用注意事项
1. 需要 root 权限运行
2. 操作系统磁盘时需要特别小心
3. 格式化操作不可恢复
4. 建议操作前备份重要数据
5. 注意检查挂载点权限

## 依赖软件包
- parted：分区工具
- psmisc：进程管理
- util-linux：系统工具
- ntfs-3g：NTFS 支持
- exfatprogs：exFAT 支持
- xfsprogs：XFS 支持
- smartmontools：磁盘监控

## 错误处理
- 命令执行失败
- 设备访问错误
- 文件系统错误
- 挂载点错误
- 权限错误
- 系统资源错误

## 更新历史
- v2.0.0 (2024年12月27日)
  * 完整重构代码
  * 添加新的文件系统支持
  * 改进错误处理
  * 添加更多安全特性
		